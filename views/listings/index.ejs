<% layout("./layouts/boilerplate") %>

<body class="bg-light">

  <div class="container my-4">

    <div class="row g-4">
      <% for (let list of allListing) { %>
        <div class="col-lg-4 col-md-6 col-sm-12">
          <div class="card shadow-sm border-0 rounded-3 h-100 listing-card position-relative">

            <!-- Listing Image -->
            <a href="/listings/<%= list._id %>" class="text-decoration-none">
              <img 
                src="<%= list.image?.url || '/images/default.jpg' %>" 
                class="card-img-top rounded-top" 
                alt="<%= list.title || 'Listing Image' %>" 
                style="height: 220px; object-fit: cover;"
              >
            </a>

            <!-- Card Body -->
            <div class="card-body d-flex flex-column">

              <!-- Title -->
              <h5 class="card-title text-dark fw-semibold">
                <%= list.title %>
              </h5>

              <!-- Price -->
              <p class="card-text text-muted mb-2">
                &#x20b9; 
                <%= list.price ? list.price.toLocaleString("en-IN") : "N/A" %> / Night
              </p>

              <!-- Action Buttons -->
              <div class="mt-auto d-flex justify-content-between align-items-center">

                <!-- Like Button -->
                <form action="/listings/<%= list._id %>/like" method="POST" class="me-2">
                  <button type="submit" 
                          class="btn btn-outline-danger btn-sm rounded-circle shadow-sm like-btn"
                          aria-label="Like Listing">
                    <i class="fa-regular fa-heart"></i>
                  </button>
                </form>

                <!-- Wishlist Button -->
                <form action="/listings/<%= list._id %>/wishlist" method="POST">
                  <button type="submit" 
                          class="btn btn-outline-primary btn-sm rounded-circle shadow-sm wishlist-btn"
                          aria-label="Add to Wishlist">
                    <i class="fa-regular fa-bookmark"></i>
                  </button>
                </form>

              </div>

            </div>
          </div>
        </div>
      <% } %>
    </div>

  </div>

  </body>
  